# macOS Process Tracing

While Linux has `ptrace`, macOS allows you to trace processes using various Mach functions.

This example spawns a child process and manipulates it to run to completion. Otherwise, the child process will continue forever (until it's killed).

The disassembly was generated by running `objdump -d child > <arch>dump.txt` on an Intel Mac and an Apple Silicon Mac.

Note: macOS has security features that prevent processes from being traced. To run this example, you need to create a self-signed certificate by going to the Keychain Access app, then Keychain Access -> Certificate Assistant -> Create a Certificate...
- Whatever you name the certificate should be passed to the `-s` flag in the `codesign` command in the provided Makefile (I chose chrislattman)
- Identity Type should be "Self Signed Root"
- Certificate Type should be "Code Signing"
- Leave "Let me override defaults" unchecked
- Click Create, Continue, then Done

Once this is done and the code is compiled, `parent` must be run as root, e.g. `sudo ./parent`
